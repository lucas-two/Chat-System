<h1>Dashboard</h1>
<h5>Welcome, {{usernameUser}} ({{ statusUser }})!</h5>
<br>


<!-- Adding and removing users from groups/channels -->
<div *ngIf="isSuperAdmin() || isGroupAdmin()" [(ngModel)]="groupRequests">
    <h5>Manage User Groups & Channels</h5>
    <!--Groups -->
    <div class="card-body">
      <h5 class="card-title">Groups</h5>
      <div class="pull-left">
          <div class="input-group">
              <select class="form-control">
                  <option *ngFor="let user of allUsers">{{ user.username }}</option>
                </select>
            <select class="form-control">
              <option *ngFor="let group of allGroups">{{ group.groupName }}</option>
            </select>
        </div>
        <br>
        <button type="submit" class="btn btn-primary btn-small" (click)="addToGroup()">Invite</button>
        <button type="submit" class="btn btn-danger btn-small" (click)="removeFromGroup()">Remove</button>
      </div>
    </div>
    <!-- Channels -->
    <div class="card-body">
        <h5 class="card-title">Channels</h5>
        <div class="pull-left">
            <div class="input-group">
              <!-- Select user -->
                <select class="form-control">
                    <option *ngFor="let user of allUsers">{{ user.username }}</option>
                  </select>
                  <!-- Select group of channel -->
              <select class="form-control" [(ngModel)]="channelGroupRequests">
                <option *ngFor="let group of allGroups">{{ group.groupName }}</option>
              </select>
              <!--Select channel -->
              <div *ngFor= "let group of allGroups">
                  <div *ngIf="group.groupName == channelGroupRequests">
                      <select class="form-control" [(ngModel)]="channelRequests">
                          <option *ngFor="let channel of group.channels">{{ channel }}</option>
                      </select>
                  </div>
                </div>
          </div>
          <br>
          <button type="submit" class="btn btn-primary btn-small" (click)="addToGroup()">Invite</button>
          <button type="submit" class="btn btn-danger btn-small" (click)="removeFromGroup()">Remove</button>
        </div>
      </div>


</div>
<br>



<!-- Message board -->
<!-- Groups -->
<h5>Your Groups</h5>
<select class="form-control" [(ngModel)]="selectedGroup">
  <option *ngFor="let group of groupsUser">{{ group.groupName }}</option>
</select>
<br>

<!-- Channels -->
<ng-template [ngIf]="hasSlectedGroup()" [ngIfElse]="notSelectedGroup">
  <h5>Your Channels</h5>
    <div *ngFor= "let group of groupsUser">
        <!-- Get the channels of the selected group -->
        <div *ngIf="group.groupName == selectedGroup">
            <select class="form-control" [(ngModel)]="selectedChannel">
                <option *ngFor="let channel of group.channels">{{ channel }}</option>
            </select>
        </div>
      </div>
  </ng-template>
  <br>

  <!-- Display a message if group is not selected -->
  <ng-template #notSelectedGroup>
    <p class="text-muted">Select a group to see your channels.</p>
  </ng-template>

  <div *ngIf="hasSlectedGroup()">
  <ng-template [ngIf]="hasSlectedChannel()" [ngIfElse]="notSelectedChannel">
      <!-- Chat History -->
      <div class="form-group">
          <h5>Chat History</h5>
          <textarea class="form-control" rows="5" disabled></textarea>
        </div>
        <!-- User message input -->
        <div class="pull-left">
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)]="userText" (keydown.enter)="sendMessage()">
              <button type="submit" class="btn btn-primary btn-small" (click)="sendMessage()">Send</button>
            </div>
        </div>
        <br>
        <!-- Exiting the channel -->
        <button type="submit" class="btn btn-danger btn-small" (click)="exitChannel()">Exit Channel</button>
  </ng-template>
</div>

  <!-- Display a message if channel is not selected -->
  <ng-template #notSelectedChannel>
      <p class="text-muted">Select a channel to enter chat room.</p>
  </ng-template>




